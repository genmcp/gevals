# NetEdge MCP Evaluation Scenario Ideas

Current scenario coverage:

1. **Route → Service Selector Mismatch (Implemented)** – Service selector drift leaves endpoints empty while the Route stays admitted. Manifest diff shows the selector mismatch. Agent confirms via Route/Service inspection and patches the selector.
2. **Route Host Without DNS Record (Implemented)** – Route host points at an NXDOMAIN value; DNS probes fail while endpoints are healthy. Agent restores the host to the recorded value and validates curl success.
3. **NetworkPolicy Blocking Router Traffic (Implemented)** – Default-deny NetworkPolicy blocks router ingress despite healthy pods/endpoints. Agent identifies the policy, removes or adjusts it, and verifies Route access.
4. **Route Reencrypt Without Backend TLS (Implemented)** – Route enforces `reencrypt` while backend serves plain HTTP. TLS handshakes fail (503s), and Route status shows TLS errors. Agent removes the TLS block or configures backend TLS correctly.
5. **Gateway LoadBalancer Missing Backing Implementation (Implemented)** – A Gateway-backed Service never receives an external IP; status conditions show “Pending” with no events. Route/Gateway objects look healthy but DNS records still point at stale values. The agent notices the missing load balancer provisioning, reviews Service status, and switches to a supported configuration so traffic succeeds.
6. **Route ReferenceGrant Missing (Implemented)** – An HTTPRoute references a backend Service in another namespace. Status reports `ResolvedRefs=False` because no `ReferenceGrant` exists. The agent adds the grant in the backend namespace, verifies the route is accepted, and confirms traffic works.

Candidate extensions:

7. **BackendTLSPolicy Trust Failure** – Router-to-pod TLS fails even though the Route and Service look correct; backend TLS policy data shows CA bundles that don’t match the pod certificate chain. The agent should inspect backend TLS configuration, observe handshake errors, and recommend updating the trusted CA material.
8. **Gateway Listener Conflicts** – Multiple Gateways declare the same hostname/port/protocol, leading to listener conflicts surfaced in Gateway status conditions. The agent should review listener reports, recognize the conflict, and propose host/port adjustments or consolidation.
9. **Untrusted/Expired Gateway Certificate** – Clients receive TLS errors while hitting the Gateway. Route/Gateway status shows certificate expiry or trust issues, and backend traffic remains healthy. The agent should investigate certificate metadata and advise rotation or reissue.
10. **Overloaded Gateway Pods** – Requests intermittently timeout despite healthy endpoints. Router/Gateway metrics reveal high CPU or queue depth on edge pods while the application pods are idle. The agent should identify resource saturation and recommend scaling Gateway replicas or adjusting limits.
11. **Deprecated TLS Cipher Suites** – A Route or Gateway only offers obsolete cipher suites; modern clients refuse to handshake. TLS settings in the Route/Gateway object show legacy ciphers. The agent should read the TLS configuration, correlate with client failures, and recommend contemporary cipher lists.
12. **Duplicate Gateway Hostnames** – Two Gateways announce the same hostname, leading to traffic being routed unpredictably. Gateway status conditions warn about competing listeners. The agent should detect the duplicate host and recommend consolidating or renaming one Gateway.
13. **Wrong DNS Record Target** – DNS records for the application host resolve to an IP outside the cluster, even though the Route and endpoints are healthy. The agent should compare DNS answers with the expected ingress address and suggest correcting the record.
14. **Incorrect GatewayClass** – A Gateway references a class that isn’t installed; status conditions indicate “Unsupported GatewayClass.” The agent should examine Gateway status, note the unsupported class, and advise switching to the available class.
15. **HTTPRoute Path Conflict** – Multiple HTTPRoutes claim the same hostname/path combination with incompatible backends. HTTPRoute status conditions indicate conflicts. The agent should inspect those routes, describe the conflict, and recommend consolidating the routing rules.
16. **Unsupported Feature Usage** – An HTTPRoute or Gateway requests filters/features not supported by the cluster implementation, so configuration is ignored. Status conditions call out unsupported features. The agent should read these conditions, explain the limitation, and provide an alternative configuration.
